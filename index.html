<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cube Draft Archetypes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #e8f0f8 0%, #d5e3f0 50%, #c8dae8 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            width: 100%;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
        }
        
        .header {
            text-align: right;
            margin-bottom: 40px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 15px;
        }

        .title {
            font-size: 3em;
            font-weight: bold;
            color: #1a2a3a;
            letter-spacing: 3px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .cube-link {
            display: inline-block;
            padding: 10px 20px;
            background: linear-gradient(135deg, rgba(255, 140, 50, 0.25) 0%, rgba(230, 110, 30, 0.35) 100%);
            border: 2px solid rgba(255, 140, 50, 0.6);
            border-radius: 8px;
            color: #1a2a3a;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9em;
            transition: all 0.3s ease;
            letter-spacing: 1px;
        }

        .cube-link:hover {
            background: linear-gradient(135deg, rgba(255, 140, 50, 0.4) 0%, rgba(230, 110, 30, 0.5) 100%);
            border-color: rgba(255, 140, 50, 0.9);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 140, 50, 0.4);
        }
        
        .content {
            display: grid;
            grid-template-columns: 400px 1fr;
            gap: 40px;
            position: relative;
        }
        
        .yorion-section {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .yorion-art {
            width: 100%;
            max-width: 350px;
            aspect-ratio: 5/7;
            background: #000;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }
        
        .yorion-art img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 15px;
            transition: opacity 0.3s ease;
        }
        
        .yorion-art .default-image {
            opacity: 1;
        }
        
        .yorion-art .default-image.hidden {
            opacity: 0;
        }
        
        .yorion-art .preview-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 15px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .yorion-art .preview-image.visible {
            opacity: 1;
        }
        
        .yorion-label {
            margin-top: 20px;
            color: #2a3a4a;
            font-size: 1.2em;
            font-style: italic;
            text-align: center;
            min-height: 1.5em;
            transition: all 0.3s ease;
        }
        
        .archetypes-container {
            position: relative;
        }
        
        .archetypes {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            transition: opacity 0.3s ease;
        }
        
        .archetypes.dimmed {
            opacity: 0.3;
            pointer-events: none;
        }
        
        .archetype {
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            cursor: pointer;
        }
        
        .archetype:hover {
            transform: translateX(5px);
            border-left-width: 6px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .archetype:focus {
            outline: 3px solid #4a9eff;
            outline-offset: 2px;
        }
        
        /* Guild-specific gradients */
        .archetype.azorius {
            background: linear-gradient(135deg, rgba(14, 104, 171, 0.5) 0%, rgba(240, 229, 216, 0.5) 100%);
        }
        
        .archetype.dimir {
            background: linear-gradient(135deg, rgba(14, 104, 171, 0.5) 0%, rgba(21, 11, 0, 0.5) 100%);
        }
        
        .archetype.rakdos {
            background: linear-gradient(135deg, rgba(21, 11, 0, 0.5) 0%, rgba(211, 32, 42, 0.5) 100%);
        }
        
        .archetype.gruul {
            background: linear-gradient(135deg, rgba(211, 32, 42, 0.5) 0%, rgba(0, 115, 62, 0.5) 100%);
        }
        
        .archetype.selesnya {
            background: linear-gradient(135deg, rgba(0, 115, 62, 0.5) 0%, rgba(240, 229, 216, 0.5) 100%);
        }
        
        .archetype.orzhov {
            background: linear-gradient(135deg, rgba(240, 229, 216, 0.5) 0%, rgba(21, 11, 0, 0.5) 100%);
        }
        
        .archetype.izzet {
            background: linear-gradient(135deg, rgba(14, 104, 171, 0.5) 0%, rgba(211, 32, 42, 0.5) 100%);
        }
        
        .archetype.golgari {
            background: linear-gradient(135deg, rgba(21, 11, 0, 0.5) 0%, rgba(0, 115, 62, 0.5) 100%);
        }
        
        .archetype.boros {
            background: linear-gradient(135deg, rgba(211, 32, 42, 0.5) 0%, rgba(240, 229, 216, 0.5) 100%);
        }
        
        .archetype.simic {
            background: linear-gradient(135deg, rgba(0, 115, 62, 0.5) 0%, rgba(14, 104, 171, 0.5) 100%);
        }

        .archetype.other {
            background: linear-gradient(135deg, rgba(150, 150, 150, 0.4) 0%, rgba(100, 100, 100, 0.4) 100%);
        }
        
        .archetype-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .color-symbols {
            display: flex;
            gap: 5px;
            margin-right: 15px;
        }
        
        .color-symbol {
            width: 28px;
            height: 28px;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.4));
        }
        
        .color-symbol img {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        .archetype-name {
            font-size: 1.5em;
            font-weight: bold;
            color: #1a1a1a;
        }
        
        .archetype-description {
            color: #2a2a2a;
            line-height: 1.6;
            font-size: 0.95em;
        }
        
        /* Card List Panel */
        .card-list-panel {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            transform: translateY(-20px);
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 10;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .card-list-panel.active {
            transform: translateY(0);
            opacity: 1;
            visibility: visible;
        }
        
        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(0, 0, 0, 0.1);
        }
        
        .panel-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .panel-title h2 {
            font-size: 2em;
            color: #1a1a1a;
            margin: 0;
        }
        
        .close-btn {
            background: rgba(211, 32, 42, 0.1);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            color: #D3202A;
            transition: all 0.3s ease;
        }
        
        .close-btn:hover {
            background: rgba(211, 32, 42, 0.2);
            transform: rotate(90deg);
        }
        
        .close-btn:focus {
            outline: 3px solid #4a9eff;
            outline-offset: 2px;
        }
        
        .card-list {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .archetype-section {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .archetype-section-title {
            font-size: 1.4em;
            font-weight: bold;
            color: #1a1a1a;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(0, 0, 0, 0.1);
        }

        .archetype-section-description {
            font-size: 0.9em;
            color: #4a4a4a;
            margin-top: 5px;
            margin-bottom: 10px;
            font-style: italic;
        }

        .archetype-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        .card-item {
            padding: 15px;
            background: rgba(0, 0, 0, 0.02);
            border-radius: 8px;
            border-left: 3px solid rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .card-item:hover {
            background: rgba(0, 0, 0, 0.05);
            transform: translateX(5px);
            border-left-width: 5px;
        }

        .card-name {
            font-weight: 600;
            color: #1a1a1a;
            font-size: 1em;
        }
        
        @media (max-width: 1200px) {
            .content {
                grid-template-columns: 1fr;
            }
            
            .yorion-section {
                order: -1;
            }
        }
        
        @media (max-width: 768px) {
            .archetypes {
                grid-template-columns: 1fr;
            }
            
            .title {
                font-size: 2em;
            }
            
            .card-list {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="title">CUBE DRAFT ARCHETYPES</div>
            <a href="https://moxfield.com/decks/CtodFgSutEKa-RfS5nmvyA" target="_blank" rel="noopener noreferrer" class="cube-link">VIEW FULL CUBE LIST →</a>
        </div>
        
        <div class="content">
            <div class="yorion-section">
                <div class="yorion-art" id="card-preview">
                    <img src="" alt="Yorion, Sky Nomad" class="default-image" id="default-image">
                    <img src="" alt="" class="preview-image" id="preview-image" style="display: none;">
                </div>
                <div class="yorion-label" id="card-label">Yorion, Sky Nomad</div>
            </div>
            
            <div class="archetypes-container">
                <div class="archetypes" id="archetypes-grid">
                    <!-- Archetypes will be generated by JavaScript -->
                </div>
                
                <!-- Card List Panel -->
                <div class="card-list-panel" id="card-panel" role="dialog" aria-labelledby="panel-title" aria-hidden="true">
                    <div class="panel-header">
                        <div class="panel-title">
                            <div class="color-symbols" id="panel-symbols"></div>
                            <h2 id="panel-title"></h2>
                        </div>
                        <button class="close-btn" id="close-panel" aria-label="Close card list">×</button>
                    </div>
                    <div class="card-list" id="card-list"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Guild data structure
        const guildData = {
            azorius: {
                name: 'AZORIUS',
                colors: ['W', 'U'],
                archetypes: [
                    {
                        name: 'BLINK',
                        description: 'Abuse ETB triggers by repeatedly flickering your creatures for maximum value.',
                        cards: [
                            'Ephemerate',
                            'Flickerwisp',
                            'Restoration Angel',
                            'Yorion, Sky Nomad',
                            'Phelia, Exuberant Shepherd'
                        ]
                    }
                ]
            },
            dimir: {
                name: 'DIMIR',
                colors: ['U', 'B'],
                archetypes: [
                    {
                        name: 'REANIMATOR',
                        description: 'Dump massive threats into your graveyard and cheat them directly into play.',
                        cards: [
                            'Dread Return',
                            'Living Death',
                            'Archon of Cruelty',
                            'Zombify',
                            'Unearth'
                        ]
                    },
                    {
                        name: 'TEMPO',
                        description: 'Deploy efficient threats while disrupting opponents with countermagic and removal.',
                        cards: [
                            'Baleful Strix',
                            'Snapcaster Mage',
                            'Fallen Shinobi',
                            'Malcolm, Alluring Scoundrel',
                            'Sedgemoor Witch'
                        ]
                    }
                ]
            },
            rakdos: {
                name: 'RAKDOS',
                colors: ['B', 'R'],
                archetypes: [
                    {
                        name: 'SACRIFICE',
                        description: 'Generate value by sacrificing creatures for damage, cards, and powerful effects.',
                        cards: [
                            'Goblin Bombardment',
                            'Oni-Cult Anvil',
                            'Woe Strider',
                            'Marionette Apprentice',
                            'Bloodtithe Harvester'
                        ]
                    },
                    {
                        name: 'DISCARD',
                        description: 'Leverage discard outlets to enable graveyard strategies and recursive threats.',
                        cards: [
                            'Faithless Looting',
                            'Anje\'s Ravager',
                            'Bloodghast',
                            'Containment Construct',
                            'Ivora, Insatiable Heir'
                        ]
                    }
                ]
            },
            gruul: {
                name: 'GRUUL',
                colors: ['R', 'G'],
                archetypes: [
                    {
                        name: 'LANDS MATTER',
                        description: 'Use lands as a resource with recursion and powerful landfall triggers.',
                        cards: [
                            'Life from the Loam',
                            'Wrenn and Six',
                            'Titania, Protector of Argoth',
                            'The Gitrog Monster',
                            'Omnath, Locus of Rage'
                        ]
                    }
                ]
            },
            selesnya: {
                name: 'SELESNYA',
                colors: ['G', 'W'],
                archetypes: [
                    {
                        name: 'TOKENS',
                        description: 'Create an army of tokens and pump them up to overwhelm your opponent.',
                        cards: [
                            'Intangible Virtue',
                            'Angel of Invention',
                            'Lingering Souls',
                            'Esika\'s Chariot',
                            'Voice of Resurgence'
                        ]
                    }
                ]
            },
            orzhov: {
                name: 'ORZHOV',
                colors: ['W', 'B'],
                archetypes: [
                    {
                        name: 'RECURSION',
                        description: 'Bring back small creatures and value permanents from your graveyard repeatedly.',
                        cards: [
                            'Lurrus of the Dream-Den',
                            'Serra Paragon',
                            'Sevinne\'s Reclamation',
                            'Return Triumphant',
                            'Sun Titan'
                        ]
                    },
                    {
                        name: 'ARISTOCRATS',
                        description: 'Sacrifice creatures for value and drain opponents with death triggers.',
                        cards: [
                            'Bastion of Remembrance',
                            'Doom Foretold',
                            'Fleshtaker',
                            'Bloodtithe Harvester',
                            'Tormod, the Desecrator'
                        ]
                    }
                ]
            },
            izzet: {
                name: 'IZZET',
                colors: ['U', 'R'],
                archetypes: [
                    {
                        name: 'SPELLSLINGER',
                        description: 'Cast instants and sorceries to generate tokens and overwhelming card advantage.',
                        cards: [
                            'Monastery Mentor',
                            'Bedlam Reveler',
                            'Guttersnipe',
                            'Drake Hatcher',
                            'Chrome Host Seedshark'
                        ]
                    }
                ]
            },
            golgari: {
                name: 'GOLGARI',
                colors: ['B', 'G'],
                archetypes: [
                    {
                        name: 'SELF-MILL',
                        description: 'Fill your graveyard to power up creatures and enable powerful synergies.',
                        cards: [
                            'Golgari Grave-Troll',
                            'Splinterfright',
                            'Satyr Wayfinder',
                            'Grapple with the Past',
                            'Grist, the Hunger Tide'
                        ]
                    }
                ]
            },
            boros: {
                name: 'BOROS',
                colors: ['R', 'W'],
                archetypes: [
                    {
                        name: 'EQUIPMENT',
                        description: 'Attach powerful equipment to efficient creatures for aggressive victories.',
                        cards: [
                            'Stoneforge Mystic',
                            'Puresteel Paladin',
                            'Colossus Hammer',
                            'Batterskull',
                            'Embercleave'
                        ]
                    },
                    {
                        name: 'AGGRO',
                        description: 'Deploy efficient threats and burn spells to pressure life totals relentlessly.',
                        cards: [
                            'Hero of Bladehold',
                            'Adeline, Resplendent Cathar',
                            'Lightning Helix',
                            'Merry, Esquire of Rohan',
                            'Monastery Swiftspear'
                        ]
                    }
                ]
            },
            simic: {
                name: 'SIMIC',
                colors: ['G', 'U'],
                archetypes: [
                    {
                        name: 'RAMP',
                        description: 'Accelerate your mana and deploy game-ending threats ahead of schedule.',
                        cards: [
                            'Primeval Titan',
                            'Oracle of Mul Daya',
                            'Lotus Cobra',
                            'Tireless Tracker',
                            'Kodama\'s Reach'
                        ]
                    },
                    {
                        name: 'FLASH',
                        description: 'Play threats and answers at instant speed to maintain control and tempo.',
                        cards: [
                            'Springheart Nantuko',
                            'Nadu, Winged Wisdom',
                            'Venser, Shaper Savant',
                            'Aether Channeler',
                            'Sublime Epiphany'
                        ]
                    }
                ]
            },
            other: {
                name: 'OTHER ARCHETYPES',
                colors: [],
                archetypes: [
                    {
                        name: 'ARTIFACTS',
                        description: 'Build around cheap artifacts with synergies that generate value and tempo.',
                        cards: [
                            'Patchwork Automaton',
                            'Nettlecyst',
                            'Retrofitter Foundry',
                            'Breya\'s Apprentice',
                            'Frogmyr Enforcer'
                        ]
                    },
                    {
                        name: 'GRAVEYARD',
                        description: 'Fill your graveyard with various strategies and leverage it as a resource.',
                        cards: [
                            'Treasure Cruise',
                            'Murktide Regent',
                            'Creeping Renaissance',
                            'Rona, Herald of Invasion',
                            'Deep Analysis'
                        ]
                    }
                ]
            }
        };

        // Helper function to create mana symbol
        function createManaSymbol(color) {
            const symbol = document.createElement('div');
            symbol.className = 'color-symbol';
            symbol.innerHTML = `<img src="https://svgs.scryfall.io/card-symbols/${color}.svg" alt="${color}">`;
            return symbol;
        }

        // Card preview functionality
        const cardCache = new Map();
        const defaultImage = document.getElementById('default-image');
        const previewImage = document.getElementById('preview-image');
        const cardLabel = document.getElementById('card-label');
        const defaultLabel = 'Yorion, Sky Nomad';

        async function fetchCardImage(cardName) {
            // Check cache first
            if (cardCache.has(cardName)) {
                return cardCache.get(cardName);
            }

            try {
                const response = await fetch(`https://api.scryfall.com/cards/named?fuzzy=${encodeURIComponent(cardName)}`);
                if (!response.ok) throw new Error('Card not found');
                
                const data = await response.json();
                const imageUrl = data.image_uris?.large || data.image_uris?.normal;
                
                // Cache the result
                cardCache.set(cardName, imageUrl);
                return imageUrl;
            } catch (error) {
                console.error('Error fetching card:', error);
                return null;
            }
        }

        function showCardPreview(cardName) {
            fetchCardImage(cardName).then(imageUrl => {
                if (imageUrl) {
                    previewImage.src = imageUrl;
                    previewImage.alt = cardName;
                    previewImage.style.display = 'block';
                    
                    // Smooth transition
                    requestAnimationFrame(() => {
                        defaultImage.classList.add('hidden');
                        previewImage.classList.add('visible');
                    });
                    
                    cardLabel.textContent = cardName;
                }
            });
        }

        function hideCardPreview() {
            defaultImage.classList.remove('hidden');
            previewImage.classList.remove('visible');
            cardLabel.textContent = defaultLabel;
            
            // Hide preview image after transition
            setTimeout(() => {
                if (!previewImage.classList.contains('visible')) {
                    previewImage.style.display = 'none';
                }
            }, 300);
        }

        // Generate guild cards
        function generateArchetypes() {
            const grid = document.getElementById('archetypes-grid');

            Object.entries(guildData).forEach(([guildKey, guild]) => {
                const guildBox = document.createElement('div');
                guildBox.className = `archetype ${guildKey}`;
                guildBox.setAttribute('tabindex', '0');
                guildBox.setAttribute('role', 'button');
                guildBox.setAttribute('aria-label', `View ${guild.name} archetypes`);
                guildBox.dataset.guild = guildKey;

                const header = document.createElement('div');
                header.className = 'archetype-header';

                const symbols = document.createElement('div');
                symbols.className = 'color-symbols';
                guild.colors.forEach(color => {
                    symbols.appendChild(createManaSymbol(color));
                });

                const name = document.createElement('div');
                name.className = 'archetype-name';
                name.textContent = guild.name;

                header.appendChild(symbols);
                header.appendChild(name);

                const description = document.createElement('div');
                description.className = 'archetype-description';

                // Add all archetype names only (no descriptions)
                guild.archetypes.forEach((archetype, index) => {
                    if (index > 0) {
                        description.appendChild(document.createElement('br'));
                    }
                    const archetypeText = document.createTextNode(archetype.name);
                    description.appendChild(archetypeText);
                });

                guildBox.appendChild(header);
                guildBox.appendChild(description);

                // Click handler
                guildBox.addEventListener('click', () => showCardPanel(guildKey));
                guildBox.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        showCardPanel(guildKey);
                    }
                });

                grid.appendChild(guildBox);
            });
        }

        // Show card panel
        function showCardPanel(guildKey) {
            const guild = guildData[guildKey];
            const panel = document.getElementById('card-panel');
            const grid = document.getElementById('archetypes-grid');
            const panelTitle = document.getElementById('panel-title');
            const panelSymbols = document.getElementById('panel-symbols');
            const cardList = document.getElementById('card-list');

            // Update panel title and symbols
            panelTitle.textContent = guild.name;
            panelSymbols.innerHTML = '';
            guild.colors.forEach(color => {
                panelSymbols.appendChild(createManaSymbol(color));
            });

            // Update card list with all archetypes grouped
            cardList.innerHTML = '';
            guild.archetypes.forEach(archetype => {
                // Create archetype section
                const archetypeSection = document.createElement('div');
                archetypeSection.className = 'archetype-section';

                // Add archetype title
                const archetypeTitle = document.createElement('div');
                archetypeTitle.className = 'archetype-section-title';
                archetypeTitle.textContent = archetype.name;
                archetypeSection.appendChild(archetypeTitle);

                // Add archetype description
                const archetypeDesc = document.createElement('div');
                archetypeDesc.className = 'archetype-section-description';
                archetypeDesc.textContent = archetype.description;
                archetypeSection.appendChild(archetypeDesc);

                // Create cards container
                const cardsContainer = document.createElement('div');
                cardsContainer.className = 'archetype-cards';

                archetype.cards.forEach(card => {
                    const cardItem = document.createElement('div');
                    cardItem.className = 'card-item';
                    cardItem.dataset.cardName = card;

                    const cardName = document.createElement('div');
                    cardName.className = 'card-name';
                    cardName.textContent = card;

                    cardItem.appendChild(cardName);

                    // Add hover events for card preview
                    cardItem.addEventListener('mouseenter', () => showCardPreview(card));
                    cardItem.addEventListener('mouseleave', () => hideCardPreview());

                    cardsContainer.appendChild(cardItem);
                });

                archetypeSection.appendChild(cardsContainer);
                cardList.appendChild(archetypeSection);
            });

            // Show panel
            grid.classList.add('dimmed');
            panel.classList.add('active');
            panel.setAttribute('aria-hidden', 'false');

            // Focus close button for accessibility
            document.getElementById('close-panel').focus();
        }

        // Hide card panel
        function hideCardPanel() {
            const panel = document.getElementById('card-panel');
            const grid = document.getElementById('archetypes-grid');

            panel.classList.remove('active');
            panel.setAttribute('aria-hidden', 'true');
            grid.classList.remove('dimmed');

            // Reset preview when closing panel
            hideCardPreview();
        }

        // Event listeners
        document.getElementById('close-panel').addEventListener('click', hideCardPanel);

        // Reset preview when mouse leaves card list area
        document.getElementById('card-list').addEventListener('mouseleave', hideCardPreview);

        // Close panel with Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                const panel = document.getElementById('card-panel');
                if (panel.classList.contains('active')) {
                    hideCardPanel();
                }
            }
        });

        // Close panel when clicking outside
        document.getElementById('card-panel').addEventListener('click', (e) => {
            if (e.target.id === 'card-panel') {
                hideCardPanel();
            }
        });

        // Initialize default Yorion image
        async function initializeDefaultImage() {
            const imageUrl = await fetchCardImage('Yorion, Sky Nomad');
            if (imageUrl) {
                defaultImage.src = imageUrl;
            }
        }

        // Initialize
        initializeDefaultImage();
        generateArchetypes();
    </script>
</body>
</html>